var __awaiter=this&&this.__awaiter||function(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,o){function s(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n["throw"](e))}catch(t){o(t)}}function c(e){e.done?r(e.value):i(e.value).then(s,a)}c((n=n.apply(e,t||[])).next())}))};var __generator=this&&this.__generator||function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol==="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(e){return function(t){return c([e,t])}}function c(s){if(n)throw new TypeError("Generator is already executing.");while(r)try{if(n=1,i&&(o=s[0]&2?i["return"]:s[0]?i["throw"]||((o=i["return"])&&o.call(i),0):i.next)&&!(o=o.call(i,s[1])).done)return o;if(i=0,o)s=[s[0]&2,o.value];switch(s[0]){case 0:case 1:o=s;break;case 4:r.label++;return{value:s[1],done:false};case 5:r.label++;i=s[1];s=[0];continue;case 7:s=r.ops.pop();r.trys.pop();continue;default:if(!(o=r.trys,o=o.length>0&&o[o.length-1])&&(s[0]===6||s[0]===2)){r=0;continue}if(s[0]===3&&(!o||s[1]>o[0]&&s[1]<o[3])){r.label=s[1];break}if(s[0]===6&&r.label<o[1]){r.label=o[1];o=s;break}if(o&&r.label<o[2]){r.label=o[2];r.ops.push(s);break}if(o[2])r.ops.pop();r.trys.pop();continue}s=t.call(e,r)}catch(a){s=[6,a];i=0}finally{n=o=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:true}}};var __spreadArrays=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),i=0,t=0;t<r;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)n[i]=o[s];return n};System.register(["./p-00ae5dc6.system.js","./p-072a5a67.system.js","./p-989be974.system.js"],(function(e){"use strict";var t,r,n,i,o,s,a,c;return{setters:[function(e){t=e.r;r=e.h;n=e.c;i=e.H},function(e){o=e.c;s=e.a;a=e.g},function(e){c=e.p}],execute:function(){var u=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/;var f=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];var h=function e(t){var r=t,n=t.indexOf("["),i=t.indexOf("]");if(n!=-1&&i!=-1){t=t.substring(0,n)+t.substring(n,i).replace(/:/g,";")+t.substring(i,t.length)}var o=u.exec(t||""),s={},a=14;while(a--){s[f[a]]=o[a]||""}if(n!=-1&&i!=-1){s.source=r;s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":");s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":");s.ipv6uri=true}return s};var p=1e3;var l=p*60;var d=l*60;var y=d*24;var v=y*7;var g=y*365.25;var m=function(e,t){t=t||{};var r=typeof e;if(r==="string"&&e.length>0){return b(e)}else if(r==="number"&&isFinite(e)){return t.long?w(e):C(e)}throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function b(e){e=String(e);if(e.length>100){return}var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!t){return}var r=parseFloat(t[1]);var n=(t[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*g;case"weeks":case"week":case"w":return r*v;case"days":case"day":case"d":return r*y;case"hours":case"hour":case"hrs":case"hr":case"h":return r*d;case"minutes":case"minute":case"mins":case"min":case"m":return r*l;case"seconds":case"second":case"secs":case"sec":case"s":return r*p;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return undefined}}function C(e){var t=Math.abs(e);if(t>=y){return Math.round(e/y)+"d"}if(t>=d){return Math.round(e/d)+"h"}if(t>=l){return Math.round(e/l)+"m"}if(t>=p){return Math.round(e/p)+"s"}return e+"ms"}function w(e){var t=Math.abs(e);if(t>=y){return k(e,t,y,"day")}if(t>=d){return k(e,t,d,"hour")}if(t>=l){return k(e,t,l,"minute")}if(t>=p){return k(e,t,p,"second")}return e+" ms"}function k(e,t,r,n){var i=t>=r*1.5;return Math.round(e/r)+" "+n+(i?"s":"")}function A(e){r.debug=r;r.default=r;r.coerce=u;r.disable=s;r.enable=o;r.enabled=a;r.humanize=m;Object.keys(e).forEach((function(t){r[t]=e[t]}));r.instances=[];r.names=[];r.skips=[];r.formatters={};function t(e){var t=0;for(var n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n);t|=0}return r.colors[Math.abs(t)%r.colors.length]}r.selectColor=t;function r(e){var o;function s(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}if(!s.enabled){return}var n=s;var i=Number(new Date);var a=i-(o||i);n.diff=a;n.prev=o;n.curr=i;o=i;e[0]=r.coerce(e[0]);if(typeof e[0]!=="string"){e.unshift("%O")}var c=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(function(t,i){if(t==="%%"){return t}c++;var o=r.formatters[i];if(typeof o==="function"){var s=e[c];t=o.call(n,s);e.splice(c,1);c--}return t}));r.formatArgs.call(n,e);var u=n.log||r.log;u.apply(n,e)}s.namespace=e;s.enabled=r.enabled(e);s.useColors=r.useColors();s.color=t(e);s.destroy=n;s.extend=i;if(typeof r.init==="function"){r.init(s)}r.instances.push(s);return s}function n(){var e=r.instances.indexOf(this);if(e!==-1){r.instances.splice(e,1);return true}return false}function i(e,t){var n=r(this.namespace+(typeof t==="undefined"?":":t)+e);n.log=this.log;return n}function o(e){r.save(e);r.names=[];r.skips=[];var t;var n=(typeof e==="string"?e:"").split(/[\s,]+/);var i=n.length;for(t=0;t<i;t++){if(!n[t]){continue}e=n[t].replace(/\*/g,".*?");if(e[0]==="-"){r.skips.push(new RegExp("^"+e.substr(1)+"$"))}else{r.names.push(new RegExp("^"+e+"$"))}}for(t=0;t<r.instances.length;t++){var o=r.instances[t];o.enabled=r.enabled(o.namespace)}}function s(){var e=__spreadArrays(r.names.map(c),r.skips.map(c).map((function(e){return"-"+e}))).join(",");r.enable("");return e}function a(e){if(e[e.length-1]==="*"){return true}var t;var n;for(t=0,n=r.skips.length;t<n;t++){if(r.skips[t].test(e)){return false}}for(t=0,n=r.names.length;t<n;t++){if(r.names[t].test(e)){return true}}return false}function c(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}function u(e){if(e instanceof Error){return e.stack||e.message}return e}r.enable(r.load());return r}var _=A;var F=o((function(e,t){t.log=i;t.formatArgs=n;t.save=o;t.load=s;t.useColors=r;t.storage=a();t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){if(typeof window!=="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)){return true}if(typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)){return false}return typeof document!=="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!=="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function n(t){t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff);if(!this.useColors){return}var r="color: "+this.color;t.splice(1,0,r,"color: inherit");var n=0;var i=0;t[0].replace(/%[a-zA-Z%]/g,(function(e){if(e==="%%"){return}n++;if(e==="%c"){i=n}}));t.splice(i,0,r)}function i(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}return typeof console==="object"&&console.log&&console.log.apply(console,e)}function o(e){try{if(e){t.storage.setItem("debug",e)}else{t.storage.removeItem("debug")}}catch(r){}}function s(){var e;try{e=t.storage.getItem("debug")}catch(r){}if(!e&&typeof process!=="undefined"&&"env"in process){e=process.env.DEBUG}return e}function a(){try{return localStorage}catch(e){}}e.exports=_(t);var c=e.exports.formatters;c.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}}));var B=F("socket.io-client:url");var x=E;function E(e,t){var r=e;t=t||typeof location!=="undefined"&&location;if(null==e)e=t.protocol+"//"+t.host;if("string"===typeof e){if("/"===e.charAt(0)){if("/"===e.charAt(1)){e=t.protocol+e}else{e=t.host+e}}if(!/^(https?|wss?):\/\//.test(e)){B("protocol-less url %s",e);if("undefined"!==typeof t){e=t.protocol+"//"+e}else{e="https://"+e}}B("parse %s",e);r=h(e)}if(!r.port){if(/^(http|ws)$/.test(r.protocol)){r.port="80"}else if(/^(http|ws)s$/.test(r.protocol)){r.port="443"}}r.path=r.path||"/";var n=r.host.indexOf(":")!==-1;var i=n?"["+r.host+"]":r.host;r.id=r.protocol+"://"+i+":"+r.port;r.href=r.protocol+"://"+i+(t&&t.port===r.port?"":":"+r.port);return r}var S=1e3;var R=S*60;var N=R*60;var T=N*24;var P=T*365.25;var O=function(e,t){t=t||{};var r=typeof e;if(r==="string"&&e.length>0){return D(e)}else if(r==="number"&&isNaN(e)===false){return t.long?q(e):j(e)}throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function D(e){e=String(e);if(e.length>100){return}var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!t){return}var r=parseFloat(t[1]);var n=(t[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*P;case"days":case"day":case"d":return r*T;case"hours":case"hour":case"hrs":case"hr":case"h":return r*N;case"minutes":case"minute":case"mins":case"min":case"m":return r*R;case"seconds":case"second":case"secs":case"sec":case"s":return r*S;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return undefined}}function j(e){if(e>=T){return Math.round(e/T)+"d"}if(e>=N){return Math.round(e/N)+"h"}if(e>=R){return Math.round(e/R)+"m"}if(e>=S){return Math.round(e/S)+"s"}return e+"ms"}function q(e){return L(e,T,"day")||L(e,N,"hour")||L(e,R,"minute")||L(e,S,"second")||e+" ms"}function L(e,t,r){if(e<t){return}if(e<t*1.5){return Math.floor(e/t)+" "+r}return Math.ceil(e/t)+" "+r+"s"}var U=o((function(e,t){t=e.exports=n.debug=n["default"]=n;t.coerce=c;t.disable=s;t.enable=o;t.enabled=a;t.humanize=O;t.instances=[];t.names=[];t.skips=[];t.formatters={};function r(e){var r=0,n;for(n in e){r=(r<<5)-r+e.charCodeAt(n);r|=0}return t.colors[Math.abs(r)%t.colors.length]}function n(e){var n;function o(){if(!o.enabled)return;var e=o;var r=+new Date;var i=r-(n||r);e.diff=i;e.prev=n;e.curr=r;n=r;var s=new Array(arguments.length);for(var a=0;a<s.length;a++){s[a]=arguments[a]}s[0]=t.coerce(s[0]);if("string"!==typeof s[0]){s.unshift("%O")}var c=0;s[0]=s[0].replace(/%([a-zA-Z%])/g,(function(r,n){if(r==="%%")return r;c++;var i=t.formatters[n];if("function"===typeof i){var o=s[c];r=i.call(e,o);s.splice(c,1);c--}return r}));t.formatArgs.call(e,s);var u=o.log||t.log||console.log.bind(console);u.apply(e,s)}o.namespace=e;o.enabled=t.enabled(e);o.useColors=t.useColors();o.color=r(e);o.destroy=i;if("function"===typeof t.init){t.init(o)}t.instances.push(o);return o}function i(){var e=t.instances.indexOf(this);if(e!==-1){t.instances.splice(e,1);return true}else{return false}}function o(e){t.save(e);t.names=[];t.skips=[];var r;var n=(typeof e==="string"?e:"").split(/[\s,]+/);var i=n.length;for(r=0;r<i;r++){if(!n[r])continue;e=n[r].replace(/\*/g,".*?");if(e[0]==="-"){t.skips.push(new RegExp("^"+e.substr(1)+"$"))}else{t.names.push(new RegExp("^"+e+"$"))}}for(r=0;r<t.instances.length;r++){var o=t.instances[r];o.enabled=t.enabled(o.namespace)}}function s(){t.enable("")}function a(e){if(e[e.length-1]==="*"){return true}var r,n;for(r=0,n=t.skips.length;r<n;r++){if(t.skips[r].test(e)){return false}}for(r=0,n=t.names.length;r<n;r++){if(t.names[r].test(e)){return true}}return false}function c(e){if(e instanceof Error)return e.stack||e.message;return e}}));var I=o((function(e,t){t=e.exports=U;t.log=i;t.formatArgs=n;t.save=o;t.load=s;t.useColors=r;t.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:a();t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){if(typeof window!=="undefined"&&window.process&&window.process.type==="renderer"){return true}if(typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)){return false}return typeof document!=="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!=="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}t.formatters.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}};function n(e){var r=this.useColors;e[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+e[0]+(r?"%c ":" ")+"+"+t.humanize(this.diff);if(!r)return;var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var i=0;var o=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){if("%%"===e)return;i++;if("%c"===e){o=i}}));e.splice(o,0,n)}function i(){return"object"===typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function o(e){try{if(null==e){t.storage.removeItem("debug")}else{t.storage.debug=e}}catch(r){}}function s(){var e;try{e=t.storage.debug}catch(r){}if(!e&&typeof process!=="undefined"&&"env"in process){e=process.env.DEBUG}return e}t.enable(s());function a(){try{return window.localStorage}catch(e){}}}));var M=o((function(e){{e.exports=t}function t(e){if(e)return r(e)}function r(e){for(var r in t.prototype){e[r]=t.prototype[r]}return e}t.prototype.on=t.prototype.addEventListener=function(e,t){this._callbacks=this._callbacks||{};(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t);return this};t.prototype.once=function(e,t){function r(){this.off(e,r);t.apply(this,arguments)}r.fn=t;this.on(e,r);return this};t.prototype.off=t.prototype.removeListener=t.prototype.removeAllListeners=t.prototype.removeEventListener=function(e,t){this._callbacks=this._callbacks||{};if(0==arguments.length){this._callbacks={};return this}var r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length){delete this._callbacks["$"+e];return this}var n;for(var i=0;i<r.length;i++){n=r[i];if(n===t||n.fn===t){r.splice(i,1);break}}return this};t.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),r=this._callbacks["$"+e];if(r){r=r.slice(0);for(var n=0,i=r.length;n<i;++n){r[n].apply(this,t)}}return this};t.prototype.listeners=function(e){this._callbacks=this._callbacks||{};return this._callbacks["$"+e]||[]};t.prototype.hasListeners=function(e){return!!this.listeners(e).length}}));var H={}.toString;var z=Array.isArray||function(e){return H.call(e)=="[object Array]"};var X=Y;var $=typeof Buffer==="function"&&typeof Buffer.isBuffer==="function";var W=typeof ArrayBuffer==="function";var J=function(e){return typeof ArrayBuffer.isView==="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer};function Y(e){return $&&Buffer.isBuffer(e)||W&&(e instanceof ArrayBuffer||J(e))}var K=Object.prototype.toString;var V=typeof Blob==="function"||typeof Blob!=="undefined"&&K.call(Blob)==="[object BlobConstructor]";var G=typeof File==="function"||typeof File!=="undefined"&&K.call(File)==="[object FileConstructor]";var Z=function(e){var t=[];var r=e.data;var n=e;n.data=Q(r,t);n.attachments=t.length;return{packet:n,buffers:t}};function Q(e,t){if(!e)return e;if(X(e)){var r={_placeholder:true,num:t.length};t.push(e);return r}else if(z(e)){var n=new Array(e.length);for(var i=0;i<e.length;i++){n[i]=Q(e[i],t)}return n}else if(typeof e==="object"&&!(e instanceof Date)){var n={};for(var o in e){n[o]=Q(e[o],t)}return n}return e}var ee=function(e,t){e.data=te(e.data,t);e.attachments=undefined;return e};function te(e,t){if(!e)return e;if(e&&e._placeholder){return t[e.num]}else if(z(e)){for(var r=0;r<e.length;r++){e[r]=te(e[r],t)}}else if(typeof e==="object"){for(var n in e){e[n]=te(e[n],t)}}return e}var re=function(e,t){function r(e,o,s){if(!e)return e;if(V&&e instanceof Blob||G&&e instanceof File){n++;var a=new FileReader;a.onload=function(){if(s){s[o]=this.result}else{i=this.result}if(!--n){t(i)}};a.readAsArrayBuffer(e)}else if(z(e)){for(var c=0;c<e.length;c++){r(e[c],c,e)}}else if(typeof e==="object"&&!X(e)){for(var u in e){r(e[u],u,e)}}}var n=0;var i=e;r(i);if(!n){t(i)}};var ne={deconstructPacket:Z,reconstructPacket:ee,removeBlobs:re};var ie=o((function(e,t){var r=I("socket.io-parser");t.protocol=4;t.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"];t.CONNECT=0;t.DISCONNECT=1;t.EVENT=2;t.ACK=3;t.ERROR=4;t.BINARY_EVENT=5;t.BINARY_ACK=6;t.Encoder=n;t.Decoder=c;function n(){}var i=t.ERROR+'"encode error"';n.prototype.encode=function(e,n){r("encoding packet %j",e);if(t.BINARY_EVENT===e.type||t.BINARY_ACK===e.type){a(e,n)}else{var i=o(e);n([i])}};function o(e){var n=""+e.type;if(t.BINARY_EVENT===e.type||t.BINARY_ACK===e.type){n+=e.attachments+"-"}if(e.nsp&&"/"!==e.nsp){n+=e.nsp+","}if(null!=e.id){n+=e.id}if(null!=e.data){var o=s(e.data);if(o!==false){n+=o}else{return i}}r("encoded %j as %s",e,n);return n}function s(e){try{return JSON.stringify(e)}catch(t){return false}}function a(e,t){function r(e){var r=ne.deconstructPacket(e);var n=o(r.packet);var i=r.buffers;i.unshift(n);t(i)}ne.removeBlobs(e,r)}function c(){this.reconstructor=null}M(c.prototype);c.prototype.add=function(e){var r;if(typeof e==="string"){r=u(e);if(t.BINARY_EVENT===r.type||t.BINARY_ACK===r.type){this.reconstructor=new h(r);if(this.reconstructor.reconPack.attachments===0){this.emit("decoded",r)}}else{this.emit("decoded",r)}}else if(X(e)||e.base64){if(!this.reconstructor){throw new Error("got binary data when not reconstructing a packet")}else{r=this.reconstructor.takeBinaryData(e);if(r){this.reconstructor=null;this.emit("decoded",r)}}}else{throw new Error("Unknown type: "+e)}};function u(e){var n=0;var i={type:Number(e.charAt(0))};if(null==t.types[i.type]){return p("unknown packet type "+i.type)}if(t.BINARY_EVENT===i.type||t.BINARY_ACK===i.type){var o="";while(e.charAt(++n)!=="-"){o+=e.charAt(n);if(n==e.length)break}if(o!=Number(o)||e.charAt(n)!=="-"){throw new Error("Illegal attachments")}i.attachments=Number(o)}if("/"===e.charAt(n+1)){i.nsp="";while(++n){var s=e.charAt(n);if(","===s)break;i.nsp+=s;if(n===e.length)break}}else{i.nsp="/"}var a=e.charAt(n+1);if(""!==a&&Number(a)==a){i.id="";while(++n){var s=e.charAt(n);if(null==s||Number(s)!=s){--n;break}i.id+=e.charAt(n);if(n===e.length)break}i.id=Number(i.id)}if(e.charAt(++n)){var c=f(e.substr(n));var u=c!==false&&(i.type===t.ERROR||z(c));if(u){i.data=c}else{return p("invalid payload")}}r("decoded %s as %j",e,i);return i}function f(e){try{return JSON.parse(e)}catch(t){return false}}c.prototype.destroy=function(){if(this.reconstructor){this.reconstructor.finishedReconstruction()}};function h(e){this.reconPack=e;this.buffers=[]}h.prototype.takeBinaryData=function(e){this.buffers.push(e);if(this.buffers.length===this.reconPack.attachments){var t=ne.reconstructPacket(this.reconPack,this.buffers);this.finishedReconstruction();return t}return null};h.prototype.finishedReconstruction=function(){this.reconPack=null;this.buffers=[]};function p(e){return{type:t.ERROR,data:"parser error: "+e}}}));var oe=o((function(e){try{e.exports=typeof XMLHttpRequest!=="undefined"&&"withCredentials"in new XMLHttpRequest}catch(t){e.exports=false}}));var se=function(e){var t=e.xdomain;var r=e.xscheme;var n=e.enablesXDR;try{if("undefined"!==typeof XMLHttpRequest&&(!t||oe)){return new XMLHttpRequest}}catch(i){}try{if("undefined"!==typeof XDomainRequest&&!r&&n){return new XDomainRequest}}catch(i){}if(!t){try{return new(self[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(i){}}};var ae=Object.keys||function e(t){var r=[];var n=Object.prototype.hasOwnProperty;for(var i in t){if(n.call(t,i)){r.push(i)}}return r};var ce={}.toString;var ue=Array.isArray||function(e){return ce.call(e)=="[object Array]"};var fe=Object.prototype.toString;var he=typeof Blob==="function"||typeof Blob!=="undefined"&&fe.call(Blob)==="[object BlobConstructor]";var pe=typeof File==="function"||typeof File!=="undefined"&&fe.call(File)==="[object FileConstructor]";var le=de;function de(e){if(!e||typeof e!=="object"){return false}if(ue(e)){for(var t=0,r=e.length;t<r;t++){if(de(e[t])){return true}}return false}if(typeof Buffer==="function"&&Buffer.isBuffer&&Buffer.isBuffer(e)||typeof ArrayBuffer==="function"&&e instanceof ArrayBuffer||he&&e instanceof Blob||pe&&e instanceof File){return true}if(e.toJSON&&typeof e.toJSON==="function"&&arguments.length===1){return de(e.toJSON(),true)}for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n)&&de(e[n])){return true}}return false}var ye=function(e,t,r){var n=e.byteLength;t=t||0;r=r||n;if(e.slice){return e.slice(t,r)}if(t<0){t+=n}if(r<0){r+=n}if(r>n){r=n}if(t>=n||t>=r||n===0){return new ArrayBuffer(0)}var i=new Uint8Array(e);var o=new Uint8Array(r-t);for(var s=t,a=0;s<r;s++,a++){o[a]=i[s]}return o.buffer};var ve=ge;function ge(e,t,r){var n=false;r=r||me;i.count=e;return e===0?t():i;function i(e,o){if(i.count<=0){throw new Error("after called too many times")}--i.count;if(e){n=true;t(e);t=r}else if(i.count===0&&!n){t(null,o)}}}function me(){}
/*! https://mths.be/utf8js v2.1.2 by @mathias */var be=String.fromCharCode;function Ce(e){var t=[];var r=0;var n=e.length;var i;var o;while(r<n){i=e.charCodeAt(r++);if(i>=55296&&i<=56319&&r<n){o=e.charCodeAt(r++);if((o&64512)==56320){t.push(((i&1023)<<10)+(o&1023)+65536)}else{t.push(i);r--}}else{t.push(i)}}return t}function we(e){var t=e.length;var r=-1;var n;var i="";while(++r<t){n=e[r];if(n>65535){n-=65536;i+=be(n>>>10&1023|55296);n=56320|n&1023}i+=be(n)}return i}function ke(e,t){if(e>=55296&&e<=57343){if(t){throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value")}return false}return true}function Ae(e,t){return be(e>>t&63|128)}function _e(e,t){if((e&4294967168)==0){return be(e)}var r="";if((e&4294965248)==0){r=be(e>>6&31|192)}else if((e&4294901760)==0){if(!ke(e,t)){e=65533}r=be(e>>12&15|224);r+=Ae(e,6)}else if((e&4292870144)==0){r=be(e>>18&7|240);r+=Ae(e,12);r+=Ae(e,6)}r+=be(e&63|128);return r}function Fe(e,t){t=t||{};var r=false!==t.strict;var n=Ce(e);var i=n.length;var o=-1;var s;var a="";while(++o<i){s=n[o];a+=_e(s,r)}return a}function Be(){if(Re>=Se){throw Error("Invalid byte index")}var e=Ee[Re]&255;Re++;if((e&192)==128){return e&63}throw Error("Invalid continuation byte")}function xe(e){var t;var r;var n;var i;var o;if(Re>Se){throw Error("Invalid byte index")}if(Re==Se){return false}t=Ee[Re]&255;Re++;if((t&128)==0){return t}if((t&224)==192){r=Be();o=(t&31)<<6|r;if(o>=128){return o}else{throw Error("Invalid continuation byte")}}if((t&240)==224){r=Be();n=Be();o=(t&15)<<12|r<<6|n;if(o>=2048){return ke(o,e)?o:65533}else{throw Error("Invalid continuation byte")}}if((t&248)==240){r=Be();n=Be();i=Be();o=(t&7)<<18|r<<12|n<<6|i;if(o>=65536&&o<=1114111){return o}}throw Error("Invalid UTF-8 detected")}var Ee;var Se;var Re;function Ne(e,t){t=t||{};var r=false!==t.strict;Ee=Ce(e);Se=Ee.length;Re=0;var n=[];var i;while((i=xe(r))!==false){n.push(i)}return we(n)}var Te={version:"2.1.2",encode:Fe,decode:Ne};var Pe=o((function(e,t){(function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var r=new Uint8Array(256);for(var n=0;n<e.length;n++){r[e.charCodeAt(n)]=n}t.encode=function(t){var r=new Uint8Array(t),n,i=r.length,o="";for(n=0;n<i;n+=3){o+=e[r[n]>>2];o+=e[(r[n]&3)<<4|r[n+1]>>4];o+=e[(r[n+1]&15)<<2|r[n+2]>>6];o+=e[r[n+2]&63]}if(i%3===2){o=o.substring(0,o.length-1)+"="}else if(i%3===1){o=o.substring(0,o.length-2)+"=="}return o};t.decode=function(e){var t=e.length*.75,n=e.length,i,o=0,s,a,c,u;if(e[e.length-1]==="="){t--;if(e[e.length-2]==="="){t--}}var f=new ArrayBuffer(t),h=new Uint8Array(f);for(i=0;i<n;i+=4){s=r[e.charCodeAt(i)];a=r[e.charCodeAt(i+1)];c=r[e.charCodeAt(i+2)];u=r[e.charCodeAt(i+3)];h[o++]=s<<2|a>>4;h[o++]=(a&15)<<4|c>>2;h[o++]=(c&3)<<6|u&63}return f}})()}));var Oe=typeof Oe!=="undefined"?Oe:typeof WebKitBlobBuilder!=="undefined"?WebKitBlobBuilder:typeof MSBlobBuilder!=="undefined"?MSBlobBuilder:typeof MozBlobBuilder!=="undefined"?MozBlobBuilder:false;var De=function(){try{var e=new Blob(["hi"]);return e.size===2}catch(t){return false}}();var je=De&&function(){try{var e=new Blob([new Uint8Array([1,2])]);return e.size===2}catch(t){return false}}();var qe=Oe&&Oe.prototype.append&&Oe.prototype.getBlob;function Le(e){return e.map((function(e){if(e.buffer instanceof ArrayBuffer){var t=e.buffer;if(e.byteLength!==t.byteLength){var r=new Uint8Array(e.byteLength);r.set(new Uint8Array(t,e.byteOffset,e.byteLength));t=r.buffer}return t}return e}))}function Ue(e,t){t=t||{};var r=new Oe;Le(e).forEach((function(e){r.append(e)}));return t.type?r.getBlob(t.type):r.getBlob()}function Ie(e,t){return new Blob(Le(e),t||{})}if(typeof Blob!=="undefined"){Ue.prototype=Blob.prototype;Ie.prototype=Blob.prototype}var Me=function(){if(De){return je?Blob:Ie}else if(qe){return Ue}else{return undefined}}();var He=o((function(e,t){var r;if(typeof ArrayBuffer!=="undefined"){r=Pe}var n=typeof navigator!=="undefined"&&/Android/i.test(navigator.userAgent);var i=typeof navigator!=="undefined"&&/PhantomJS/i.test(navigator.userAgent);var o=n||i;t.protocol=3;var s=t.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6};var a=ae(s);var c={type:"error",data:"parser error"};t.encodePacket=function(e,t,r,n){if(typeof t==="function"){n=t;t=false}if(typeof r==="function"){n=r;r=null}var i=e.data===undefined?undefined:e.data.buffer||e.data;if(typeof ArrayBuffer!=="undefined"&&i instanceof ArrayBuffer){return f(e,t,n)}else if(typeof Me!=="undefined"&&i instanceof Me){return p(e,t,n)}if(i&&i.base64){return u(e,n)}var o=s[e.type];if(undefined!==e.data){o+=r?Te.encode(String(e.data),{strict:false}):String(e.data)}return n(""+o)};function u(e,r){var n="b"+t.packets[e.type]+e.data.data;return r(n)}function f(e,r,n){if(!r){return t.encodeBase64Packet(e,n)}var i=e.data;var o=new Uint8Array(i);var a=new Uint8Array(1+i.byteLength);a[0]=s[e.type];for(var c=0;c<o.length;c++){a[c+1]=o[c]}return n(a.buffer)}function h(e,r,n){if(!r){return t.encodeBase64Packet(e,n)}var i=new FileReader;i.onload=function(){t.encodePacket({type:e.type,data:i.result},r,true,n)};return i.readAsArrayBuffer(e.data)}function p(e,r,n){if(!r){return t.encodeBase64Packet(e,n)}if(o){return h(e,r,n)}var i=new Uint8Array(1);i[0]=s[e.type];var a=new Me([i.buffer,e.data]);return n(a)}t.encodeBase64Packet=function(e,r){var n="b"+t.packets[e.type];if(typeof Me!=="undefined"&&e.data instanceof Me){var i=new FileReader;i.onload=function(){var e=i.result.split(",")[1];r(n+e)};return i.readAsDataURL(e.data)}var o;try{o=String.fromCharCode.apply(null,new Uint8Array(e.data))}catch(u){var s=new Uint8Array(e.data);var a=new Array(s.length);for(var c=0;c<s.length;c++){a[c]=s[c]}o=String.fromCharCode.apply(null,a)}n+=btoa(o);return r(n)};t.decodePacket=function(e,r,n){if(e===undefined){return c}if(typeof e==="string"){if(e.charAt(0)==="b"){return t.decodeBase64Packet(e.substr(1),r)}if(n){e=l(e);if(e===false){return c}}var i=e.charAt(0);if(Number(i)!=i||!a[i]){return c}if(e.length>1){return{type:a[i],data:e.substring(1)}}else{return{type:a[i]}}}var o=new Uint8Array(e);var i=o[0];var s=ye(e,1);if(Me&&r==="blob"){s=new Me([s])}return{type:a[i],data:s}};function l(e){try{e=Te.decode(e,{strict:false})}catch(t){return false}return e}t.decodeBase64Packet=function(e,t){var n=a[e.charAt(0)];if(!r){return{type:n,data:{base64:true,data:e.substr(1)}}}var i=r.decode(e.substr(1));if(t==="blob"&&Me){i=new Me([i])}return{type:n,data:i}};t.encodePayload=function(e,r,n){if(typeof r==="function"){n=r;r=null}var i=le(e);if(r&&i){if(Me&&!o){return t.encodePayloadAsBlob(e,n)}return t.encodePayloadAsArrayBuffer(e,n)}if(!e.length){return n("0:")}function s(e){return e.length+":"+e}function a(e,n){t.encodePacket(e,!i?false:r,false,(function(e){n(null,s(e))}))}d(e,a,(function(e,t){return n(t.join(""))}))};function d(e,t,r){var n=new Array(e.length);var i=ve(e.length,r);var o=function(e,r,i){t(r,(function(t,r){n[e]=r;i(t,n)}))};for(var s=0;s<e.length;s++){o(s,e[s],i)}}t.decodePayload=function(e,r,n){if(typeof e!=="string"){return t.decodePayloadAsBinary(e,r,n)}if(typeof r==="function"){n=r;r=null}var i;if(e===""){return n(c,0,1)}var o="",s,a;for(var u=0,f=e.length;u<f;u++){var h=e.charAt(u);if(h!==":"){o+=h;continue}if(o===""||o!=(s=Number(o))){return n(c,0,1)}a=e.substr(u+1,s);if(o!=a.length){return n(c,0,1)}if(a.length){i=t.decodePacket(a,r,false);if(c.type===i.type&&c.data===i.data){return n(c,0,1)}var p=n(i,u+s,f);if(false===p)return}u+=s;o=""}if(o!==""){return n(c,0,1)}};t.encodePayloadAsArrayBuffer=function(e,r){if(!e.length){return r(new ArrayBuffer(0))}function n(e,r){t.encodePacket(e,true,true,(function(e){return r(null,e)}))}d(e,n,(function(e,t){var n=t.reduce((function(e,t){var r;if(typeof t==="string"){r=t.length}else{r=t.byteLength}return e+r.toString().length+r+2}),0);var i=new Uint8Array(n);var o=0;t.forEach((function(e){var t=typeof e==="string";var r=e;if(t){var n=new Uint8Array(e.length);for(var s=0;s<e.length;s++){n[s]=e.charCodeAt(s)}r=n.buffer}if(t){i[o++]=0}else{i[o++]=1}var a=r.byteLength.toString();for(var s=0;s<a.length;s++){i[o++]=parseInt(a[s])}i[o++]=255;var n=new Uint8Array(r);for(var s=0;s<n.length;s++){i[o++]=n[s]}}));return r(i.buffer)}))};t.encodePayloadAsBlob=function(e,r){function n(e,r){t.encodePacket(e,true,true,(function(e){var t=new Uint8Array(1);t[0]=1;if(typeof e==="string"){var n=new Uint8Array(e.length);for(var i=0;i<e.length;i++){n[i]=e.charCodeAt(i)}e=n.buffer;t[0]=0}var o=e instanceof ArrayBuffer?e.byteLength:e.size;var s=o.toString();var a=new Uint8Array(s.length+1);for(var i=0;i<s.length;i++){a[i]=parseInt(s[i])}a[s.length]=255;if(Me){var c=new Me([t.buffer,a.buffer,e]);r(null,c)}}))}d(e,n,(function(e,t){return r(new Me(t))}))};t.decodePayloadAsBinary=function(e,r,n){if(typeof r==="function"){n=r;r=null}var i=e;var o=[];while(i.byteLength>0){var s=new Uint8Array(i);var a=s[0]===0;var u="";for(var f=1;;f++){if(s[f]===255)break;if(u.length>310){return n(c,0,1)}u+=s[f]}i=ye(i,2+u.length);u=parseInt(u);var h=ye(i,0,u);if(a){try{h=String.fromCharCode.apply(null,new Uint8Array(h))}catch(d){var p=new Uint8Array(h);h="";for(var f=0;f<p.length;f++){h+=String.fromCharCode(p[f])}}}o.push(h);i=ye(i,u)}var l=o.length;o.forEach((function(e,i){n(t.decodePacket(e,r,true),i,l)}))}}));var ze=o((function(e){{e.exports=t}function t(e){if(e)return r(e)}function r(e){for(var r in t.prototype){e[r]=t.prototype[r]}return e}t.prototype.on=t.prototype.addEventListener=function(e,t){this._callbacks=this._callbacks||{};(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t);return this};t.prototype.once=function(e,t){function r(){this.off(e,r);t.apply(this,arguments)}r.fn=t;this.on(e,r);return this};t.prototype.off=t.prototype.removeListener=t.prototype.removeAllListeners=t.prototype.removeEventListener=function(e,t){this._callbacks=this._callbacks||{};if(0==arguments.length){this._callbacks={};return this}var r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length){delete this._callbacks["$"+e];return this}var n;for(var i=0;i<r.length;i++){n=r[i];if(n===t||n.fn===t){r.splice(i,1);break}}return this};t.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),r=this._callbacks["$"+e];if(r){r=r.slice(0);for(var n=0,i=r.length;n<i;++n){r[n].apply(this,t)}}return this};t.prototype.listeners=function(e){this._callbacks=this._callbacks||{};return this._callbacks["$"+e]||[]};t.prototype.hasListeners=function(e){return!!this.listeners(e).length}}));var Xe=$e;function $e(e){this.path=e.path;this.hostname=e.hostname;this.port=e.port;this.secure=e.secure;this.query=e.query;this.timestampParam=e.timestampParam;this.timestampRequests=e.timestampRequests;this.readyState="";this.agent=e.agent||false;this.socket=e.socket;this.enablesXDR=e.enablesXDR;this.withCredentials=e.withCredentials;this.pfx=e.pfx;this.key=e.key;this.passphrase=e.passphrase;this.cert=e.cert;this.ca=e.ca;this.ciphers=e.ciphers;this.rejectUnauthorized=e.rejectUnauthorized;this.forceNode=e.forceNode;this.isReactNative=e.isReactNative;this.extraHeaders=e.extraHeaders;this.localAddress=e.localAddress}ze($e.prototype);$e.prototype.onError=function(e,t){var r=new Error(e);r.type="TransportError";r.description=t;this.emit("error",r);return this};$e.prototype.open=function(){if("closed"===this.readyState||""===this.readyState){this.readyState="opening";this.doOpen()}return this};$e.prototype.close=function(){if("opening"===this.readyState||"open"===this.readyState){this.doClose();this.onClose()}return this};$e.prototype.send=function(e){if("open"===this.readyState){this.write(e)}else{throw new Error("Transport not open")}};$e.prototype.onOpen=function(){this.readyState="open";this.writable=true;this.emit("open")};$e.prototype.onData=function(e){var t=He.decodePacket(e,this.socket.binaryType);this.onPacket(t)};$e.prototype.onPacket=function(e){this.emit("packet",e)};$e.prototype.onClose=function(){this.readyState="closed";this.emit("close")};var We=function(e){var t="";for(var r in e){if(e.hasOwnProperty(r)){if(t.length)t+="&";t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r])}}return t};var Je=function(e){var t={};var r=e.split("&");for(var n=0,i=r.length;n<i;n++){var o=r[n].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t};var Ye={encode:We,decode:Je};var Ke=function(e,t){var r=function(){};r.prototype=t.prototype;e.prototype=new r;e.prototype.constructor=e};var Ve="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),Ge=64,Ze={},Qe=0,et=0,tt;function rt(e){var t="";do{t=Ve[e%Ge]+t;e=Math.floor(e/Ge)}while(e>0);return t}function nt(e){var t=0;for(et=0;et<e.length;et++){t=t*Ge+Ze[e.charAt(et)]}return t}function it(){var e=rt(+new Date);if(e!==tt)return Qe=0,tt=e;return e+"."+rt(Qe++)}for(;et<Ge;et++)Ze[Ve[et]]=et;it.encode=rt;it.decode=nt;var ot=it;var st=F("engine.io-client:polling");var at=ut;var ct=function(){var e=se;var t=new e({xdomain:false});return null!=t.responseType}();function ut(e){var t=e&&e.forceBase64;if(!ct||t){this.supportsBinary=false}Xe.call(this,e)}Ke(ut,Xe);ut.prototype.name="polling";ut.prototype.doOpen=function(){this.poll()};ut.prototype.pause=function(e){var t=this;this.readyState="pausing";function r(){st("paused");t.readyState="paused";e()}if(this.polling||!this.writable){var n=0;if(this.polling){st("we are currently polling - waiting to pause");n++;this.once("pollComplete",(function(){st("pre-pause polling complete");--n||r()}))}if(!this.writable){st("we are currently writing - waiting to pause");n++;this.once("drain",(function(){st("pre-pause writing complete");--n||r()}))}}else{r()}};ut.prototype.poll=function(){st("polling");this.polling=true;this.doPoll();this.emit("poll")};ut.prototype.onData=function(e){var t=this;st("polling got data %s",e);var r=function(e,r,n){if("opening"===t.readyState){t.onOpen()}if("close"===e.type){t.onClose();return false}t.onPacket(e)};He.decodePayload(e,this.socket.binaryType,r);if("closed"!==this.readyState){this.polling=false;this.emit("pollComplete");if("open"===this.readyState){this.poll()}else{st('ignoring poll - transport state "%s"',this.readyState)}}};ut.prototype.doClose=function(){var e=this;function t(){st("writing close packet");e.write([{type:"close"}])}if("open"===this.readyState){st("transport open - closing");t()}else{st("transport not open - deferring close");this.once("open",t)}};ut.prototype.write=function(e){var t=this;this.writable=false;var r=function(){t.writable=true;t.emit("drain")};He.encodePayload(e,this.supportsBinary,(function(e){t.doWrite(e,r)}))};ut.prototype.uri=function(){var e=this.query||{};var t=this.secure?"https":"http";var r="";if(false!==this.timestampRequests){e[this.timestampParam]=ot()}if(!this.supportsBinary&&!e.sid){e.b64=1}e=Ye.encode(e);if(this.port&&("https"===t&&Number(this.port)!==443||"http"===t&&Number(this.port)!==80)){r=":"+this.port}if(e.length){e="?"+e}var n=this.hostname.indexOf(":")!==-1;return t+"://"+(n?"["+this.hostname+"]":this.hostname)+r+this.path+e};var ft=F("engine.io-client:polling-xhr");var ht=dt;var pt=yt;function lt(){}function dt(e){at.call(this,e);this.requestTimeout=e.requestTimeout;this.extraHeaders=e.extraHeaders;if(typeof location!=="undefined"){var t="https:"===location.protocol;var r=location.port;if(!r){r=t?443:80}this.xd=typeof location!=="undefined"&&e.hostname!==location.hostname||r!==e.port;this.xs=e.secure!==t}}Ke(dt,at);dt.prototype.supportsBinary=true;dt.prototype.request=function(e){e=e||{};e.uri=this.uri();e.xd=this.xd;e.xs=this.xs;e.agent=this.agent||false;e.supportsBinary=this.supportsBinary;e.enablesXDR=this.enablesXDR;e.withCredentials=this.withCredentials;e.pfx=this.pfx;e.key=this.key;e.passphrase=this.passphrase;e.cert=this.cert;e.ca=this.ca;e.ciphers=this.ciphers;e.rejectUnauthorized=this.rejectUnauthorized;e.requestTimeout=this.requestTimeout;e.extraHeaders=this.extraHeaders;return new yt(e)};dt.prototype.doWrite=function(e,t){var r=typeof e!=="string"&&e!==undefined;var n=this.request({method:"POST",data:e,isBinary:r});var i=this;n.on("success",t);n.on("error",(function(e){i.onError("xhr post error",e)}));this.sendXhr=n};dt.prototype.doPoll=function(){ft("xhr poll");var e=this.request();var t=this;e.on("data",(function(e){t.onData(e)}));e.on("error",(function(e){t.onError("xhr poll error",e)}));this.pollXhr=e};function yt(e){this.method=e.method||"GET";this.uri=e.uri;this.xd=!!e.xd;this.xs=!!e.xs;this.async=false!==e.async;this.data=undefined!==e.data?e.data:null;this.agent=e.agent;this.isBinary=e.isBinary;this.supportsBinary=e.supportsBinary;this.enablesXDR=e.enablesXDR;this.withCredentials=e.withCredentials;this.requestTimeout=e.requestTimeout;this.pfx=e.pfx;this.key=e.key;this.passphrase=e.passphrase;this.cert=e.cert;this.ca=e.ca;this.ciphers=e.ciphers;this.rejectUnauthorized=e.rejectUnauthorized;this.extraHeaders=e.extraHeaders;this.create()}ze(yt.prototype);yt.prototype.create=function(){var e={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};e.pfx=this.pfx;e.key=this.key;e.passphrase=this.passphrase;e.cert=this.cert;e.ca=this.ca;e.ciphers=this.ciphers;e.rejectUnauthorized=this.rejectUnauthorized;var t=this.xhr=new se(e);var r=this;try{ft("xhr open %s: %s",this.method,this.uri);t.open(this.method,this.uri,this.async);try{if(this.extraHeaders){t.setDisableHeaderCheck&&t.setDisableHeaderCheck(true);for(var n in this.extraHeaders){if(this.extraHeaders.hasOwnProperty(n)){t.setRequestHeader(n,this.extraHeaders[n])}}}}catch(i){}if("POST"===this.method){try{if(this.isBinary){t.setRequestHeader("Content-type","application/octet-stream")}else{t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}}catch(i){}}try{t.setRequestHeader("Accept","*/*")}catch(i){}if("withCredentials"in t){t.withCredentials=this.withCredentials}if(this.requestTimeout){t.timeout=this.requestTimeout}if(this.hasXDR()){t.onload=function(){r.onLoad()};t.onerror=function(){r.onError(t.responseText)}}else{t.onreadystatechange=function(){if(t.readyState===2){try{var e=t.getResponseHeader("Content-Type");if(r.supportsBinary&&e==="application/octet-stream"||e==="application/octet-stream; charset=UTF-8"){t.responseType="arraybuffer"}}catch(i){}}if(4!==t.readyState)return;if(200===t.status||1223===t.status){r.onLoad()}else{setTimeout((function(){r.onError(typeof t.status==="number"?t.status:0)}),0)}}}ft("xhr data %s",this.data);t.send(this.data)}catch(i){setTimeout((function(){r.onError(i)}),0);return}if(typeof document!=="undefined"){this.index=yt.requestsCount++;yt.requests[this.index]=this}};yt.prototype.onSuccess=function(){this.emit("success");this.cleanup()};yt.prototype.onData=function(e){this.emit("data",e);this.onSuccess()};yt.prototype.onError=function(e){this.emit("error",e);this.cleanup(true)};yt.prototype.cleanup=function(e){if("undefined"===typeof this.xhr||null===this.xhr){return}if(this.hasXDR()){this.xhr.onload=this.xhr.onerror=lt}else{this.xhr.onreadystatechange=lt}if(e){try{this.xhr.abort()}catch(t){}}if(typeof document!=="undefined"){delete yt.requests[this.index]}this.xhr=null};yt.prototype.onLoad=function(){var e;try{var t;try{t=this.xhr.getResponseHeader("Content-Type")}catch(r){}if(t==="application/octet-stream"||t==="application/octet-stream; charset=UTF-8"){e=this.xhr.response||this.xhr.responseText}else{e=this.xhr.responseText}}catch(r){this.onError(r)}if(null!=e){this.onData(e)}};yt.prototype.hasXDR=function(){return typeof XDomainRequest!=="undefined"&&!this.xs&&this.enablesXDR};yt.prototype.abort=function(){this.cleanup()};yt.requestsCount=0;yt.requests={};if(typeof document!=="undefined"){if(typeof attachEvent==="function"){attachEvent("onunload",gt)}else if(typeof addEventListener==="function"){var vt="onpagehide"in self?"pagehide":"unload";addEventListener(vt,gt,false)}}function gt(){for(var e in yt.requests){if(yt.requests.hasOwnProperty(e)){yt.requests[e].abort()}}}ht.Request=pt;var mt=_t;var bt=/\n/g;var Ct=/\\n/g;var wt;function kt(){}function At(){return typeof self!=="undefined"?self:typeof window!=="undefined"?window:typeof s!=="undefined"?s:{}}function _t(e){at.call(this,e);this.query=this.query||{};if(!wt){var t=At();wt=t.___eio=t.___eio||[]}this.index=wt.length;var r=this;wt.push((function(e){r.onData(e)}));this.query.j=this.index;if(typeof addEventListener==="function"){addEventListener("beforeunload",(function(){if(r.script)r.script.onerror=kt}),false)}}Ke(_t,at);_t.prototype.supportsBinary=false;_t.prototype.doClose=function(){if(this.script){this.script.parentNode.removeChild(this.script);this.script=null}if(this.form){this.form.parentNode.removeChild(this.form);this.form=null;this.iframe=null}at.prototype.doClose.call(this)};_t.prototype.doPoll=function(){var e=this;var t=document.createElement("script");if(this.script){this.script.parentNode.removeChild(this.script);this.script=null}t.async=true;t.src=this.uri();t.onerror=function(t){e.onError("jsonp poll error",t)};var r=document.getElementsByTagName("script")[0];if(r){r.parentNode.insertBefore(t,r)}else{(document.head||document.body).appendChild(t)}this.script=t;var n="undefined"!==typeof navigator&&/gecko/i.test(navigator.userAgent);if(n){setTimeout((function(){var e=document.createElement("iframe");document.body.appendChild(e);document.body.removeChild(e)}),100)}};_t.prototype.doWrite=function(e,t){var r=this;if(!this.form){var n=document.createElement("form");var i=document.createElement("textarea");var o=this.iframeId="eio_iframe_"+this.index;var s;n.className="socketio";n.style.position="absolute";n.style.top="-1000px";n.style.left="-1000px";n.target=o;n.method="POST";n.setAttribute("accept-charset","utf-8");i.name="d";n.appendChild(i);document.body.appendChild(n);this.form=n;this.area=i}this.form.action=this.uri();function a(){c();t()}function c(){if(r.iframe){try{r.form.removeChild(r.iframe)}catch(t){r.onError("jsonp polling iframe removal error",t)}}try{var e='<iframe src="javascript:0" name="'+r.iframeId+'">';s=document.createElement(e)}catch(t){s=document.createElement("iframe");s.name=r.iframeId;s.src="javascript:0"}s.id=r.iframeId;r.form.appendChild(s);r.iframe=s}c();e=e.replace(Ct,"\\\n");this.area.value=e.replace(bt,"\\n");try{this.form.submit()}catch(u){}if(this.iframe.attachEvent){this.iframe.onreadystatechange=function(){if(r.iframe.readyState==="complete"){a()}}}else{this.iframe.onload=a}};var Ft={};var Bt=Object.freeze({__proto__:null,default:Ft});var xt=a(Bt);var Et=F("engine.io-client:websocket");var St,Rt;if(typeof WebSocket!=="undefined"){St=WebSocket}else if(typeof self!=="undefined"){St=self.WebSocket||self.MozWebSocket}if(typeof window==="undefined"){try{Rt=xt}catch(cr){}}var Nt=St||Rt;var Tt=Pt;function Pt(e){var t=e&&e.forceBase64;if(t){this.supportsBinary=false}this.perMessageDeflate=e.perMessageDeflate;this.usingBrowserWebSocket=St&&!e.forceNode;this.protocols=e.protocols;if(!this.usingBrowserWebSocket){Nt=Rt}Xe.call(this,e)}Ke(Pt,Xe);Pt.prototype.name="websocket";Pt.prototype.supportsBinary=true;Pt.prototype.doOpen=function(){if(!this.check()){return}var e=this.uri();var t=this.protocols;var r={agent:this.agent,perMessageDeflate:this.perMessageDeflate};r.pfx=this.pfx;r.key=this.key;r.passphrase=this.passphrase;r.cert=this.cert;r.ca=this.ca;r.ciphers=this.ciphers;r.rejectUnauthorized=this.rejectUnauthorized;if(this.extraHeaders){r.headers=this.extraHeaders}if(this.localAddress){r.localAddress=this.localAddress}try{this.ws=this.usingBrowserWebSocket&&!this.isReactNative?t?new Nt(e,t):new Nt(e):new Nt(e,t,r)}catch(n){return this.emit("error",n)}if(this.ws.binaryType===undefined){this.supportsBinary=false}if(this.ws.supports&&this.ws.supports.binary){this.supportsBinary=true;this.ws.binaryType="nodebuffer"}else{this.ws.binaryType="arraybuffer"}this.addEventListeners()};Pt.prototype.addEventListeners=function(){var e=this;this.ws.onopen=function(){e.onOpen()};this.ws.onclose=function(){e.onClose()};this.ws.onmessage=function(t){e.onData(t.data)};this.ws.onerror=function(t){e.onError("websocket error",t)}};Pt.prototype.write=function(e){var t=this;this.writable=false;var r=e.length;for(var n=0,i=r;n<i;n++){(function(e){He.encodePacket(e,t.supportsBinary,(function(n){if(!t.usingBrowserWebSocket){var i={};if(e.options){i.compress=e.options.compress}if(t.perMessageDeflate){var s="string"===typeof n?Buffer.byteLength(n):n.length;if(s<t.perMessageDeflate.threshold){i.compress=false}}}try{if(t.usingBrowserWebSocket){t.ws.send(n)}else{t.ws.send(n,i)}}catch(cr){Et("websocket closed before onclose event")}--r||o()}))})(e[n])}function o(){t.emit("flush");setTimeout((function(){t.writable=true;t.emit("drain")}),0)}};Pt.prototype.onClose=function(){Xe.prototype.onClose.call(this)};Pt.prototype.doClose=function(){if(typeof this.ws!=="undefined"){this.ws.close()}};Pt.prototype.uri=function(){var e=this.query||{};var t=this.secure?"wss":"ws";var r="";if(this.port&&("wss"===t&&Number(this.port)!==443||"ws"===t&&Number(this.port)!==80)){r=":"+this.port}if(this.timestampRequests){e[this.timestampParam]=ot()}if(!this.supportsBinary){e.b64=1}e=Ye.encode(e);if(e.length){e="?"+e}var n=this.hostname.indexOf(":")!==-1;return t+"://"+(n?"["+this.hostname+"]":this.hostname)+r+this.path+e};Pt.prototype.check=function(){return!!Nt&&!("__initialize"in Nt&&this.name===Pt.prototype.name)};var Ot=jt;var Dt=Tt;function jt(e){var t;var r=false;var n=false;var i=false!==e.jsonp;if(typeof location!=="undefined"){var o="https:"===location.protocol;var s=location.port;if(!s){s=o?443:80}r=e.hostname!==location.hostname||s!==e.port;n=e.secure!==o}e.xdomain=r;e.xscheme=n;t=new se(e);if("open"in t&&!e.forceJSONP){return new ht(e)}else{if(!i)throw new Error("JSONP disabled");return new mt(e)}}var qt={polling:Ot,websocket:Dt};var Lt=[].indexOf;var Ut=function(e,t){if(Lt)return e.indexOf(t);for(var r=0;r<e.length;++r){if(e[r]===t)return r}return-1};var It=F("engine.io-client:socket");var Mt=Ht;function Ht(e,t){if(!(this instanceof Ht))return new Ht(e,t);t=t||{};if(e&&"object"===typeof e){t=e;e=null}if(e){e=h(e);t.hostname=e.host;t.secure=e.protocol==="https"||e.protocol==="wss";t.port=e.port;if(e.query)t.query=e.query}else if(t.host){t.hostname=h(t.host).host}this.secure=null!=t.secure?t.secure:typeof location!=="undefined"&&"https:"===location.protocol;if(t.hostname&&!t.port){t.port=this.secure?"443":"80"}this.agent=t.agent||false;this.hostname=t.hostname||(typeof location!=="undefined"?location.hostname:"localhost");this.port=t.port||(typeof location!=="undefined"&&location.port?location.port:this.secure?443:80);this.query=t.query||{};if("string"===typeof this.query)this.query=Ye.decode(this.query);this.upgrade=false!==t.upgrade;this.path=(t.path||"/engine.io").replace(/\/$/,"")+"/";this.forceJSONP=!!t.forceJSONP;this.jsonp=false!==t.jsonp;this.forceBase64=!!t.forceBase64;this.enablesXDR=!!t.enablesXDR;this.withCredentials=false!==t.withCredentials;this.timestampParam=t.timestampParam||"t";this.timestampRequests=t.timestampRequests;this.transports=t.transports||["polling","websocket"];this.transportOptions=t.transportOptions||{};this.readyState="";this.writeBuffer=[];this.prevBufferLen=0;this.policyPort=t.policyPort||843;this.rememberUpgrade=t.rememberUpgrade||false;this.binaryType=null;this.onlyBinaryUpgrades=t.onlyBinaryUpgrades;this.perMessageDeflate=false!==t.perMessageDeflate?t.perMessageDeflate||{}:false;if(true===this.perMessageDeflate)this.perMessageDeflate={};if(this.perMessageDeflate&&null==this.perMessageDeflate.threshold){this.perMessageDeflate.threshold=1024}this.pfx=t.pfx||null;this.key=t.key||null;this.passphrase=t.passphrase||null;this.cert=t.cert||null;this.ca=t.ca||null;this.ciphers=t.ciphers||null;this.rejectUnauthorized=t.rejectUnauthorized===undefined?true:t.rejectUnauthorized;this.forceNode=!!t.forceNode;this.isReactNative=typeof navigator!=="undefined"&&typeof navigator.product==="string"&&navigator.product.toLowerCase()==="reactnative";if(typeof self==="undefined"||this.isReactNative){if(t.extraHeaders&&Object.keys(t.extraHeaders).length>0){this.extraHeaders=t.extraHeaders}if(t.localAddress){this.localAddress=t.localAddress}}this.id=null;this.upgrades=null;this.pingInterval=null;this.pingTimeout=null;this.pingIntervalTimer=null;this.pingTimeoutTimer=null;this.open()}Ht.priorWebsocketSuccess=false;ze(Ht.prototype);Ht.protocol=He.protocol;Ht.Socket=Ht;Ht.Transport=Xe;Ht.transports=qt;Ht.parser=He;Ht.prototype.createTransport=function(e){It('creating transport "%s"',e);var t=zt(this.query);t.EIO=He.protocol;t.transport=e;var r=this.transportOptions[e]||{};if(this.id)t.sid=this.id;var n=new qt[e]({query:t,socket:this,agent:r.agent||this.agent,hostname:r.hostname||this.hostname,port:r.port||this.port,secure:r.secure||this.secure,path:r.path||this.path,forceJSONP:r.forceJSONP||this.forceJSONP,jsonp:r.jsonp||this.jsonp,forceBase64:r.forceBase64||this.forceBase64,enablesXDR:r.enablesXDR||this.enablesXDR,withCredentials:r.withCredentials||this.withCredentials,timestampRequests:r.timestampRequests||this.timestampRequests,timestampParam:r.timestampParam||this.timestampParam,policyPort:r.policyPort||this.policyPort,pfx:r.pfx||this.pfx,key:r.key||this.key,passphrase:r.passphrase||this.passphrase,cert:r.cert||this.cert,ca:r.ca||this.ca,ciphers:r.ciphers||this.ciphers,rejectUnauthorized:r.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:r.perMessageDeflate||this.perMessageDeflate,extraHeaders:r.extraHeaders||this.extraHeaders,forceNode:r.forceNode||this.forceNode,localAddress:r.localAddress||this.localAddress,requestTimeout:r.requestTimeout||this.requestTimeout,protocols:r.protocols||void 0,isReactNative:this.isReactNative});return n};function zt(e){var t={};for(var r in e){if(e.hasOwnProperty(r)){t[r]=e[r]}}return t}Ht.prototype.open=function(){var e;if(this.rememberUpgrade&&Ht.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1){e="websocket"}else if(0===this.transports.length){var t=this;setTimeout((function(){t.emit("error","No transports available")}),0);return}else{e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(cr){this.transports.shift();this.open();return}e.open();this.setTransport(e)};Ht.prototype.setTransport=function(e){It("setting transport %s",e.name);var t=this;if(this.transport){It("clearing existing transport %s",this.transport.name);this.transport.removeAllListeners()}this.transport=e;e.on("drain",(function(){t.onDrain()})).on("packet",(function(e){t.onPacket(e)})).on("error",(function(e){t.onError(e)})).on("close",(function(){t.onClose("transport close")}))};Ht.prototype.probe=function(e){It('probing transport "%s"',e);var t=this.createTransport(e,{probe:1});var r=false;var n=this;Ht.priorWebsocketSuccess=false;function i(){if(n.onlyBinaryUpgrades){var i=!this.supportsBinary&&n.transport.supportsBinary;r=r||i}if(r)return;It('probe transport "%s" opened',e);t.send([{type:"ping",data:"probe"}]);t.once("packet",(function(i){if(r)return;if("pong"===i.type&&"probe"===i.data){It('probe transport "%s" pong',e);n.upgrading=true;n.emit("upgrading",t);if(!t)return;Ht.priorWebsocketSuccess="websocket"===t.name;It('pausing current transport "%s"',n.transport.name);n.transport.pause((function(){if(r)return;if("closed"===n.readyState)return;It("changing transport and sending upgrade packet");f();n.setTransport(t);t.send([{type:"upgrade"}]);n.emit("upgrade",t);t=null;n.upgrading=false;n.flush()}))}else{It('probe transport "%s" failed',e);var o=new Error("probe error");o.transport=t.name;n.emit("upgradeError",o)}}))}function o(){if(r)return;r=true;f();t.close();t=null}function s(r){var i=new Error("probe error: "+r);i.transport=t.name;o();It('probe transport "%s" failed because of error: %s',e,r);n.emit("upgradeError",i)}function a(){s("transport closed")}function c(){s("socket closed")}function u(e){if(t&&e.name!==t.name){It('"%s" works - aborting "%s"',e.name,t.name);o()}}function f(){t.removeListener("open",i);t.removeListener("error",s);t.removeListener("close",a);n.removeListener("close",c);n.removeListener("upgrading",u)}t.once("open",i);t.once("error",s);t.once("close",a);this.once("close",c);this.once("upgrading",u);t.open()};Ht.prototype.onOpen=function(){It("socket open");this.readyState="open";Ht.priorWebsocketSuccess="websocket"===this.transport.name;this.emit("open");this.flush();if("open"===this.readyState&&this.upgrade&&this.transport.pause){It("starting upgrade probes");for(var e=0,t=this.upgrades.length;e<t;e++){this.probe(this.upgrades[e])}}};Ht.prototype.onPacket=function(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){It('socket receive: type "%s", data "%s"',e.type,e.data);this.emit("packet",e);this.emit("heartbeat");switch(e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"pong":this.setPing();this.emit("pong");break;case"error":var t=new Error("server error");t.code=e.data;this.onError(t);break;case"message":this.emit("data",e.data);this.emit("message",e.data);break}}else{It('packet received with socket readyState "%s"',this.readyState)}};Ht.prototype.onHandshake=function(e){this.emit("handshake",e);this.id=e.sid;this.transport.query.sid=e.sid;this.upgrades=this.filterUpgrades(e.upgrades);this.pingInterval=e.pingInterval;this.pingTimeout=e.pingTimeout;this.onOpen();if("closed"===this.readyState)return;this.setPing();this.removeListener("heartbeat",this.onHeartbeat);this.on("heartbeat",this.onHeartbeat)};Ht.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout((function(){if("closed"===t.readyState)return;t.onClose("ping timeout")}),e||t.pingInterval+t.pingTimeout)};Ht.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer);e.pingIntervalTimer=setTimeout((function(){It("writing ping packet - expecting pong within %sms",e.pingTimeout);e.ping();e.onHeartbeat(e.pingTimeout)}),e.pingInterval)};Ht.prototype.ping=function(){var e=this;this.sendPacket("ping",(function(){e.emit("ping")}))};Ht.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen);this.prevBufferLen=0;if(0===this.writeBuffer.length){this.emit("drain")}else{this.flush()}};Ht.prototype.flush=function(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){It("flushing %d packets in socket",this.writeBuffer.length);this.transport.send(this.writeBuffer);this.prevBufferLen=this.writeBuffer.length;this.emit("flush")}};Ht.prototype.write=Ht.prototype.send=function(e,t,r){this.sendPacket("message",e,t,r);return this};Ht.prototype.sendPacket=function(e,t,r,n){if("function"===typeof t){n=t;t=undefined}if("function"===typeof r){n=r;r=null}if("closing"===this.readyState||"closed"===this.readyState){return}r=r||{};r.compress=false!==r.compress;var i={type:e,data:t,options:r};this.emit("packetCreate",i);this.writeBuffer.push(i);if(n)this.once("flush",n);this.flush()};Ht.prototype.close=function(){if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var e=this;if(this.writeBuffer.length){this.once("drain",(function(){if(this.upgrading){n()}else{t()}}))}else if(this.upgrading){n()}else{t()}}function t(){e.onClose("forced close");It("socket closing - telling transport to close");e.transport.close()}function r(){e.removeListener("upgrade",r);e.removeListener("upgradeError",r);t()}function n(){e.once("upgrade",r);e.once("upgradeError",r)}return this};Ht.prototype.onError=function(e){It("socket error %j",e);Ht.priorWebsocketSuccess=false;this.emit("error",e);this.onClose("transport error",e)};Ht.prototype.onClose=function(e,t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){It('socket close with reason: "%s"',e);var r=this;clearTimeout(this.pingIntervalTimer);clearTimeout(this.pingTimeoutTimer);this.transport.removeAllListeners("close");this.transport.close();this.transport.removeAllListeners();this.readyState="closed";this.id=null;this.emit("close",e,t);r.writeBuffer=[];r.prevBufferLen=0}};Ht.prototype.filterUpgrades=function(e){var t=[];for(var r=0,n=e.length;r<n;r++){if(~Ut(this.transports,e[r]))t.push(e[r])}return t};var Xt=Mt;var $t=He;Xt.parser=$t;var Wt=o((function(e){{e.exports=t}function t(e){if(e)return r(e)}function r(e){for(var r in t.prototype){e[r]=t.prototype[r]}return e}t.prototype.on=t.prototype.addEventListener=function(e,t){this._callbacks=this._callbacks||{};(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t);return this};t.prototype.once=function(e,t){function r(){this.off(e,r);t.apply(this,arguments)}r.fn=t;this.on(e,r);return this};t.prototype.off=t.prototype.removeListener=t.prototype.removeAllListeners=t.prototype.removeEventListener=function(e,t){this._callbacks=this._callbacks||{};if(0==arguments.length){this._callbacks={};return this}var r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length){delete this._callbacks["$"+e];return this}var n;for(var i=0;i<r.length;i++){n=r[i];if(n===t||n.fn===t){r.splice(i,1);break}}return this};t.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),r=this._callbacks["$"+e];if(r){r=r.slice(0);for(var n=0,i=r.length;n<i;++n){r[n].apply(this,t)}}return this};t.prototype.listeners=function(e){this._callbacks=this._callbacks||{};return this._callbacks["$"+e]||[]};t.prototype.hasListeners=function(e){return!!this.listeners(e).length}}));var Jt=Yt;function Yt(e,t){var r=[];t=t||0;for(var n=t||0;n<e.length;n++){r[n-t]=e[n]}return r}var Kt=Vt;function Vt(e,t,r){e.on(t,r);return{destroy:function(){e.removeListener(t,r)}}}var Gt=[].slice;var Zt=function(e,t){if("string"==typeof t)t=e[t];if("function"!=typeof t)throw new Error("bind() requires a function");var r=Gt.call(arguments,2);return function(){return t.apply(e,r.concat(Gt.call(arguments)))}};var Qt=o((function(e,t){var r=F("socket.io-client:socket");e.exports=t=o;var n={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1};var i=Wt.prototype.emit;function o(e,t,r){this.io=e;this.nsp=t;this.json=this;this.ids=0;this.acks={};this.receiveBuffer=[];this.sendBuffer=[];this.connected=false;this.disconnected=true;this.flags={};if(r&&r.query){this.query=r.query}if(this.io.autoConnect)this.open()}Wt(o.prototype);o.prototype.subEvents=function(){if(this.subs)return;var e=this.io;this.subs=[Kt(e,"open",Zt(this,"onopen")),Kt(e,"packet",Zt(this,"onpacket")),Kt(e,"close",Zt(this,"onclose"))]};o.prototype.open=o.prototype.connect=function(){if(this.connected)return this;this.subEvents();this.io.open();if("open"===this.io.readyState)this.onopen();this.emit("connecting");return this};o.prototype.send=function(){var e=Jt(arguments);e.unshift("message");this.emit.apply(this,e);return this};o.prototype.emit=function(e){if(n.hasOwnProperty(e)){i.apply(this,arguments);return this}var t=Jt(arguments);var o={type:(this.flags.binary!==undefined?this.flags.binary:le(t))?ie.BINARY_EVENT:ie.EVENT,data:t};o.options={};o.options.compress=!this.flags||false!==this.flags.compress;if("function"===typeof t[t.length-1]){r("emitting packet with ack id %d",this.ids);this.acks[this.ids]=t.pop();o.id=this.ids++}if(this.connected){this.packet(o)}else{this.sendBuffer.push(o)}this.flags={};return this};o.prototype.packet=function(e){e.nsp=this.nsp;this.io.packet(e)};o.prototype.onopen=function(){r("transport is open - connecting");if("/"!==this.nsp){if(this.query){var e=typeof this.query==="object"?Ye.encode(this.query):this.query;r("sending connect packet with query %s",e);this.packet({type:ie.CONNECT,query:e})}else{this.packet({type:ie.CONNECT})}}};o.prototype.onclose=function(e){r("close (%s)",e);this.connected=false;this.disconnected=true;delete this.id;this.emit("disconnect",e)};o.prototype.onpacket=function(e){var t=e.nsp===this.nsp;var r=e.type===ie.ERROR&&e.nsp==="/";if(!t&&!r)return;switch(e.type){case ie.CONNECT:this.onconnect();break;case ie.EVENT:this.onevent(e);break;case ie.BINARY_EVENT:this.onevent(e);break;case ie.ACK:this.onack(e);break;case ie.BINARY_ACK:this.onack(e);break;case ie.DISCONNECT:this.ondisconnect();break;case ie.ERROR:this.emit("error",e.data);break}};o.prototype.onevent=function(e){var t=e.data||[];r("emitting event %j",t);if(null!=e.id){r("attaching ack callback to event");t.push(this.ack(e.id))}if(this.connected){i.apply(this,t)}else{this.receiveBuffer.push(t)}};o.prototype.ack=function(e){var t=this;var n=false;return function(){if(n)return;n=true;var i=Jt(arguments);r("sending ack %j",i);t.packet({type:le(i)?ie.BINARY_ACK:ie.ACK,id:e,data:i})}};o.prototype.onack=function(e){var t=this.acks[e.id];if("function"===typeof t){r("calling ack %s with %j",e.id,e.data);t.apply(this,e.data);delete this.acks[e.id]}else{r("bad ack %s",e.id)}};o.prototype.onconnect=function(){this.connected=true;this.disconnected=false;this.emit("connect");this.emitBuffered()};o.prototype.emitBuffered=function(){var e;for(e=0;e<this.receiveBuffer.length;e++){i.apply(this,this.receiveBuffer[e])}this.receiveBuffer=[];for(e=0;e<this.sendBuffer.length;e++){this.packet(this.sendBuffer[e])}this.sendBuffer=[]};o.prototype.ondisconnect=function(){r("server disconnect (%s)",this.nsp);this.destroy();this.onclose("io server disconnect")};o.prototype.destroy=function(){if(this.subs){for(var e=0;e<this.subs.length;e++){this.subs[e].destroy()}this.subs=null}this.io.destroy(this)};o.prototype.close=o.prototype.disconnect=function(){if(this.connected){r("performing disconnect (%s)",this.nsp);this.packet({type:ie.DISCONNECT})}this.destroy();if(this.connected){this.onclose("io client disconnect")}return this};o.prototype.compress=function(e){this.flags.compress=e;return this};o.prototype.binary=function(e){this.flags.binary=e;return this}}));var er=tr;function tr(e){e=e||{};this.ms=e.min||100;this.max=e.max||1e4;this.factor=e.factor||2;this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0;this.attempts=0}tr.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random();var r=Math.floor(t*this.jitter*e);e=(Math.floor(t*10)&1)==0?e-r:e+r}return Math.min(e,this.max)|0};tr.prototype.reset=function(){this.attempts=0};tr.prototype.setMin=function(e){this.ms=e};tr.prototype.setMax=function(e){this.max=e};tr.prototype.setJitter=function(e){this.jitter=e};var rr=F("socket.io-client:manager");var nr=Object.prototype.hasOwnProperty;var ir=or;function or(e,t){if(!(this instanceof or))return new or(e,t);if(e&&"object"===typeof e){t=e;e=undefined}t=t||{};t.path=t.path||"/socket.io";this.nsps={};this.subs=[];this.opts=t;this.reconnection(t.reconnection!==false);this.reconnectionAttempts(t.reconnectionAttempts||Infinity);this.reconnectionDelay(t.reconnectionDelay||1e3);this.reconnectionDelayMax(t.reconnectionDelayMax||5e3);this.randomizationFactor(t.randomizationFactor||.5);this.backoff=new er({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()});this.timeout(null==t.timeout?2e4:t.timeout);this.readyState="closed";this.uri=e;this.connecting=[];this.lastPing=null;this.encoding=false;this.packetBuffer=[];var r=t.parser||ie;this.encoder=new r.Encoder;this.decoder=new r.Decoder;this.autoConnect=t.autoConnect!==false;if(this.autoConnect)this.open()}or.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var e in this.nsps){if(nr.call(this.nsps,e)){this.nsps[e].emit.apply(this.nsps[e],arguments)}}};or.prototype.updateSocketIds=function(){for(var e in this.nsps){if(nr.call(this.nsps,e)){this.nsps[e].id=this.generateId(e)}}};or.prototype.generateId=function(e){return(e==="/"?"":e+"#")+this.engine.id};Wt(or.prototype);or.prototype.reconnection=function(e){if(!arguments.length)return this._reconnection;this._reconnection=!!e;return this};or.prototype.reconnectionAttempts=function(e){if(!arguments.length)return this._reconnectionAttempts;this._reconnectionAttempts=e;return this};or.prototype.reconnectionDelay=function(e){if(!arguments.length)return this._reconnectionDelay;this._reconnectionDelay=e;this.backoff&&this.backoff.setMin(e);return this};or.prototype.randomizationFactor=function(e){if(!arguments.length)return this._randomizationFactor;this._randomizationFactor=e;this.backoff&&this.backoff.setJitter(e);return this};or.prototype.reconnectionDelayMax=function(e){if(!arguments.length)return this._reconnectionDelayMax;this._reconnectionDelayMax=e;this.backoff&&this.backoff.setMax(e);return this};or.prototype.timeout=function(e){if(!arguments.length)return this._timeout;this._timeout=e;return this};or.prototype.maybeReconnectOnOpen=function(){if(!this.reconnecting&&this._reconnection&&this.backoff.attempts===0){this.reconnect()}};or.prototype.open=or.prototype.connect=function(e,t){rr("readyState %s",this.readyState);if(~this.readyState.indexOf("open"))return this;rr("opening %s",this.uri);this.engine=Xt(this.uri,this.opts);var r=this.engine;var n=this;this.readyState="opening";this.skipReconnect=false;var i=Kt(r,"open",(function(){n.onopen();e&&e()}));var o=Kt(r,"error",(function(t){rr("connect_error");n.cleanup();n.readyState="closed";n.emitAll("connect_error",t);if(e){var r=new Error("Connection error");r.data=t;e(r)}else{n.maybeReconnectOnOpen()}}));if(false!==this._timeout){var s=this._timeout;rr("connect attempt will timeout after %d",s);var a=setTimeout((function(){rr("connect attempt timed out after %d",s);i.destroy();r.close();r.emit("error","timeout");n.emitAll("connect_timeout",s)}),s);this.subs.push({destroy:function(){clearTimeout(a)}})}this.subs.push(i);this.subs.push(o);return this};or.prototype.onopen=function(){rr("open");this.cleanup();this.readyState="open";this.emit("open");var e=this.engine;this.subs.push(Kt(e,"data",Zt(this,"ondata")));this.subs.push(Kt(e,"ping",Zt(this,"onping")));this.subs.push(Kt(e,"pong",Zt(this,"onpong")));this.subs.push(Kt(e,"error",Zt(this,"onerror")));this.subs.push(Kt(e,"close",Zt(this,"onclose")));this.subs.push(Kt(this.decoder,"decoded",Zt(this,"ondecoded")))};or.prototype.onping=function(){this.lastPing=new Date;this.emitAll("ping")};or.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)};or.prototype.ondata=function(e){this.decoder.add(e)};or.prototype.ondecoded=function(e){this.emit("packet",e)};or.prototype.onerror=function(e){rr("error",e);this.emitAll("error",e)};or.prototype.socket=function(e,t){var r=this.nsps[e];if(!r){r=new Qt(this,e,t);this.nsps[e]=r;var n=this;r.on("connecting",i);r.on("connect",(function(){r.id=n.generateId(e)}));if(this.autoConnect){i()}}function i(){if(!~Ut(n.connecting,r)){n.connecting.push(r)}}return r};or.prototype.destroy=function(e){var t=Ut(this.connecting,e);if(~t)this.connecting.splice(t,1);if(this.connecting.length)return;this.close()};or.prototype.packet=function(e){rr("writing packet %j",e);var t=this;if(e.query&&e.type===0)e.nsp+="?"+e.query;if(!t.encoding){t.encoding=true;this.encoder.encode(e,(function(r){for(var n=0;n<r.length;n++){t.engine.write(r[n],e.options)}t.encoding=false;t.processPacketQueue()}))}else{t.packetBuffer.push(e)}};or.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var e=this.packetBuffer.shift();this.packet(e)}};or.prototype.cleanup=function(){rr("cleanup");var e=this.subs.length;for(var t=0;t<e;t++){var r=this.subs.shift();r.destroy()}this.packetBuffer=[];this.encoding=false;this.lastPing=null;this.decoder.destroy()};or.prototype.close=or.prototype.disconnect=function(){rr("disconnect");this.skipReconnect=true;this.reconnecting=false;if("opening"===this.readyState){this.cleanup()}this.backoff.reset();this.readyState="closed";if(this.engine)this.engine.close()};or.prototype.onclose=function(e){rr("onclose");this.cleanup();this.backoff.reset();this.readyState="closed";this.emit("close",e);if(this._reconnection&&!this.skipReconnect){this.reconnect()}};or.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var e=this;if(this.backoff.attempts>=this._reconnectionAttempts){rr("reconnect failed");this.backoff.reset();this.emitAll("reconnect_failed");this.reconnecting=false}else{var t=this.backoff.duration();rr("will wait %dms before reconnect attempt",t);this.reconnecting=true;var r=setTimeout((function(){if(e.skipReconnect)return;rr("attempting reconnect");e.emitAll("reconnect_attempt",e.backoff.attempts);e.emitAll("reconnecting",e.backoff.attempts);if(e.skipReconnect)return;e.open((function(t){if(t){rr("reconnect attempt error");e.reconnecting=false;e.reconnect();e.emitAll("reconnect_error",t.data)}else{rr("reconnect success");e.onreconnect()}}))}),t);this.subs.push({destroy:function(){clearTimeout(r)}})}};or.prototype.onreconnect=function(){var e=this.backoff.attempts;this.reconnecting=false;this.backoff.reset();this.updateSocketIds();this.emitAll("reconnect",e)};var sr=o((function(e,t){var r=F("socket.io-client");e.exports=t=i;var n=t.managers={};function i(e,t){if(typeof e==="object"){t=e;e=undefined}t=t||{};var i=x(e);var o=i.source;var s=i.id;var a=i.path;var c=n[s]&&a in n[s].nsps;var u=t.forceNew||t["force new connection"]||false===t.multiplex||c;var f;if(u){r("ignoring socket cache for %s",o);f=ir(o,t)}else{if(!n[s]){r("new io instance for %s",o);n[s]=ir(o,t)}f=n[s]}if(i.query&&!t.query){t.query=i.query}return f.socket(i.path,t)}t.protocol=ie.protocol;t.connect=i;t.Manager=ir;t.Socket=Qt}));var ar=e("cronk_socketio_datastream",function(){function e(e){var r=this;t(this,e);this.filters={};this.cachedResponse={};this.dispatch=function(e,t,n){return __awaiter(r,void 0,void 0,(function(){var r;return __generator(this,(function(i){r=new CustomEvent(e,{bubbles:true,composed:true,detail:n});console.debug(e,n);t.dispatchEvent(r);return[2]}))}))};this.responseHandler=function(e,t){return __awaiter(r,void 0,void 0,(function(){var r,n,i,o,s,a,u;var f=this;return __generator(this,(function(h){switch(h.label){case 0:r=t.channel,n=t.dispatch,i=t.filters,o=t.shape,s=t.filtered;return[4,c(e,o)];case 1:a=h.sent();u=s!==undefined?s:true;if(u&&i.length&&Array.isArray(a)){a=a.filter((function(e){return i.map((function(t){return t(e)})).every((function(e){return e}))}))}this.cachedResponse[r]=function(){return __awaiter(f,void 0,void 0,(function(){return __generator(this,(function(e){return[2,n(r,this.hostEl,a)]}))}))};this.cachedResponse[r]();return[2]}}))}))};this.type="data";this.url=null;this.channels=[];this.acceptsFilters=true}e.prototype.resendBroadcast=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){Object.values(this.cachedResponse).forEach((function(e){return e()}));return[2]}))}))};e.prototype.broadcast=function(e,t,r){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(n){switch(n.label){case 0:if(!e)return[2];return[4,this.responseHandler(e,{channel:t,dispatch:this.dispatch,filters:Object.values(this.filters),shape:r})];case 1:n.sent();return[2]}}))}))};e.prototype.initStreamListeners=function(){return __awaiter(this,void 0,void 0,(function(){var e=this;return __generator(this,(function(t){if(!this._socket)return[2];this.channels.forEach((function(t){var r=t.channel,n=t.shape;var i=t.listen;if(!i)return;if(typeof i==="string"){i=[i]}i.forEach((function(t){e._socket&&e._socket.on(t,(function(t){return __awaiter(e,void 0,void 0,(function(){return __generator(this,(function(e){switch(e.label){case 0:return[4,this.broadcast(t,r,n)];case 1:e.sent();return[2]}}))}))}))}))}));this._socket.on("connect",(function(){console.info("you have been connected")}));this._socket.on("disconnect",(function(){console.info("you have been disconnected")}));this._socket.on("reconnect",(function(){console.info("you have been reconnected")}));this._socket.on("reconnect_error",(function(){console.info("attempt to reconnect has failed")}));return[2]}))}))};e.prototype.initDataStream=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){if(this.url){this._socket=sr.connect(this.url,{});this.initStreamListeners()}return[2]}))}))};e.prototype.componentWillUpdate=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){switch(e.label){case 0:return[4,this.initDataStream()];case 1:e.sent();return[2]}}))}))};e.prototype.componentDidUnload=function(){this.filters={};if(this._socket){this._socket.disconnect();this._socket=undefined}};e.prototype.componentDidLoad=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){switch(e.label){case 0:if(!this.url)return[2];return[4,this.initDataStream()];case 1:e.sent();return[2]}}))}))};e.prototype.render=function(){var e;return r(i,{"aria-hidden":"true",class:(e={"cronk-filtered-datastream":this.acceptsFilters},e["cronk-"+this.type+"-eventstream"]=true,e)})};Object.defineProperty(e.prototype,"hostEl",{get:function(){return n(this)},enumerable:true,configurable:true});return e}())}}}));