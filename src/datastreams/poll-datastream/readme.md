# cronk-poll-datastream



<!-- Auto Generated Below -->


## Properties

| Property          | Attribute         | Description                                                                  | Type                                                              | Default                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| ----------------- | ----------------- | ---------------------------------------------------------------------------- | ----------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `acceptsFilters`  | `accepts-filters` | Whether or not a datastream is affected by filters like cronk-selector       | `boolean`                                                         | `false`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| `channels`        | --                | Channel configuration describing how broadcasts are constructed              | `ChannelShape[]`                                                  | `DEFAULT_CHANNELS`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| `credentials`     | `credentials`     | fetch API credentials                                                        | `"include" \| "omit" \| "same-origin"`                            | `'include'`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| `mode`            | `mode`            | fetch API request mode                                                       | `"cors" \| "navigate" \| "no-cors" \| "same-origin"`              | `'cors'`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| `pollFrequency`   | `poll-frequency`  | Polling interval to check URL for changes                                    | `number`                                                          | `15000`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| `responseFormat`  | `response-format` | fetch API response format                                                    | `"csv" \| "json" \| "text" \| "tsv"`                              | `'json'`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| `responseHandler` | --                | Custom response handler                                                      | `(data: MetadataObj, streamState: StreamConfig) => Promise<void>` | `async (     data: any,     streamState: StreamConfig,   ) => {     const { channels, dispatch, filters } = streamState;     let filteredData: any;      channels.forEach(async c => {       filteredData = await processValue(data, c.shape \|\| DEFAULT_SHAPE);       const canFilter = c.filtered !== undefined ? c.filtered : true;       if (canFilter && filters.length && Array.isArray(filteredData)) {         filteredData = filteredData.filter((datum: MetadataObj) =>           filters.map(filter => filter(datum)).every(i => i),         );       }       const dispatchFn = (_channel: string, _hostEl: HTMLElement, _filteredData: any) => async () => {         console.debug(`%cEPI-POLL-DATASTREAM::dispatch::${_channel}`, 'color: violet');         dispatch(_channel, _hostEl, _filteredData);       };       this.cachedBroadcasts[c.channel] = dispatchFn(c.channel, this.hostEl, filteredData);       this.cachedBroadcasts[c.channel]();     });   }` |
| `type`            | `type`            | sets class `cronk-${this.type}-eventstream` on cronk-poll-datastream element | `string`                                                          | `'data'`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| `url`             | `url`             | fetch API URL                                                                | `string`                                                          | `null`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |


## Methods

### `addFilter(fnKey: string, filterFn: () => boolean) => Promise<void>`

Attach/add a new filter function to apply to members of a datastream

#### Returns

Type: `Promise<void>`



### `listFilters() => Promise<any>`

List any filter functions applied to the data streams

#### Returns

Type: `Promise<any>`



### `resendBroadcast() => Promise<void>`

Rebroadcast latest cached payload to on all configured channels

#### Returns

Type: `Promise<void>`




----------------------------------------------

*Built with [StencilJS](https://stenciljs.com/)*
